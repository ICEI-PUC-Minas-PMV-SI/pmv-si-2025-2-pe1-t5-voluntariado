<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard ONG</title>

    <!-- CSS do dashboard -->
    <link rel="stylesheet" href="../assets/css/dashboard-ong.css">
</head>

<body>

<!-- ============================== -->
<!--       CABE√áALHO DASHBOARD      -->
<!-- ============================== -->

<header>
    <div class="logo">
        <img src="../assets/img/logo.png" alt="Logo Voluntairar">
    </div>

    <nav class="navbar navbar-light">
        <a href="index.html">Home</a>
        <a href="vagas.html">Vagas</a>
        <a href="sobre.html">Sobre</a>

        <input id="pesquisa" type="text" placeholder="Seacher üîç">

        <div class="menu-dropdown" tabindex="0">
            <button class="menu-button">Sair</button>
            <div class="dropdown-content">
                <a class="entrar" href="login.html">Trocar Conta</a>
                <a class="cadastro" href="cadastro-ong.html">Cadastrar ONG</a>
            </div>
        </div>
    </nav>
</header>


<!-- ============================== -->
<!--       CONTE√öDO DO DASHBOARD    -->
<!-- ============================== -->

<main class="dashboard-container">

    <h1>Dashboard de Vagas</h1>
    <p class="subtitulo">Todas as vagas cadastradas agrupadas por institui√ß√£o.</p>

    <div id="listaVagasOng"></div>

</main>


<script>
    function carregarVagasAgrupadas() {

        const vagas = JSON.parse(localStorage.getItem("vagasCadastradas")) || [];
        const lista = document.getElementById("listaVagasOng");

        lista.innerHTML = "";

        if (vagas.length === 0) {
            lista.innerHTML = "<p class='nao-tem'>Nenhuma vaga cadastrada ainda.</p>";
            return;
        }

        // AGRUPA VAGAS POR NOME DE INSTITUI√á√ÉO
        const grupos = {};

        vagas.forEach(vaga => {
            if (!grupos[vaga.instituicao]) {
                grupos[vaga.instituicao] = [];
            }
            grupos[vaga.instituicao].push(vaga);
        });

        // RENDERIZA GRUPOS
        for (const instituicao in grupos) {
            lista.innerHTML += `
                <h2 class="titulo-instituicao">${instituicao}</h2>

                <div class="grupo-vagas">
                    ${grupos[instituicao].map(v => `
                        <div class="card-vaga">
                            <h3>${v.tituloVaga}</h3>
                            <p><strong>Local:</strong> ${v.local}</p>
                            <p><strong>√Årea:</strong> ${v.area}</p>
                            <p><strong>Tempo:</strong> ${v.tempo}</p>
                        </div>
                    `).join("")}
                </div>
            `;
        }
    }

    carregarVagasAgrupadas();
</script>

</body>
</html>
