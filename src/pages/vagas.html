<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vagas - Voluntariar</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/vagas.css">
</head>

<body>
<header>
    <div class="logo">
        <img src="../assets/img/logo.png" alt="Logo Voluntairar">
    </div>

    <nav class="navbar navbar-light">
        <a href="index.html">Home</a>
        <a href="vagas.html">Vagas de voluntariado</a>
        <a href="../pages/dashboard-voluntario.html">Minhas Candidaturas</a>
        <a href="dashboard-ong.html">Dashboard Vagas</a>
        <a href="sobre.html">Sobre nÃ³s</a>

        <input id="pesquisa" type="text" placeholder="Seacher ğŸ”">

        <div class="menu-dropdown" tabindex="0">
            <button class="menu-button">Entrar/Cadastro</button>
            <div class="dropdown-content">
                <a class="entrar" href="login.html">Entrar</a>
                <a class="cadastro" href="cadastro-ong.html">Cadastro ONG</a>
            </div>
        </div>
    </nav>
</header>

<main>
    <section>
        <div class="search-auth-vagas">
            <input id="pesquisasVagas" type="text" placeholder="Buscar ğŸ”">
        </div>

        <div class="lista-vagas" id="listaVagas"></div>
    </section>
</main>

<script>
    function carregarVagas() {
        let vagas = JSON.parse(localStorage.getItem("vagas")) || [];
        const lista = document.getElementById("listaVagas");
        lista.innerHTML = "";

        vagas.forEach((v, index) => {
            lista.innerHTML += `
                <article class="vagas">
                    <h3>${v.instituicao}</h3>
                    <ul>
                        <li><strong>Vaga:</strong> ${v.titulo}</li>
                        <li><strong>Local:</strong> ${v.local}</li>
                        <li><strong>Ãrea:</strong> ${v.area}</li>
                        <li><strong>Tempo:</strong> ${v.tempo}</li>
                    </ul>

                    <button class="btn-candidatar" onclick="candidatar(${index})">
                        Quero me candidatar ğŸ™‹
                    </button>
                </article>
            `;
        });
    }

    function candidatar(index) {
        let vagas = JSON.parse(localStorage.getItem("vagas")) || [];
        let vagasCandidatadas = JSON.parse(localStorage.getItem("vagas_candidatadas")) || [];

        const vaga = vagas[index];

        // impedir duplicaÃ§Ã£o
        const jaTem = vagasCandidatadas.some(v => v.titulo === vaga.titulo && v.instituicao === vaga.instituicao);

        if (jaTem) {
            alert("VocÃª jÃ¡ se candidatou a esta vaga!");
            return;
        }

        vagasCandidatadas.push(vaga);
        localStorage.setItem("vagas_candidatadas", JSON.stringify(vagasCandidatadas));

        alert("Candidatura realizada com sucesso!");
    }

    carregarVagas();
</script>

<style>
    .btn-candidatar {
        margin-top: 10px;
        padding: 10px 15px;
        background-color: #4d59e3;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }

    .btn-candidatar:hover {
        background-color: #3946c2;
    }
</style>

</body>
</html>
